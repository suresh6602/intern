<!DOCTYPE html>
<html>
    <head>
        <title>Shopping Card</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" >
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
        <link rel="stylesheet" href="dashboard.css">
    </head>
    <body>
        <header>
            <div class="card-logo">
              <i class="bi bi-cart4"></i>
            </div>

            <div class="cart-name">
              <h1>Shopping-card</h1>
            </div>

            <!-- <div class="home">
               <button>
              <i class="bi bi-house-add-fill"></i> Home</button> 
            </div> -->
 
            <div class="search-bar">
              <input type="text" placeholder="search...">
              <button>search</button>
            </div>

            <div class="box">
              <button type="button" class="btn btn-primary">
                mycard <span class="badge">0</span>
              </button>
            </div>

            <div class="user-info">   
              <button class="signup">sign up</button>
              <button class="login">login </button>
            </div>
            
        </header>

        <div class="card-container" id="accordion"></div> 

        <script>
          document.querySelector('.signup').addEventListener('click', function() {
            window.location.href = 'signup.html';
            });
          document.querySelector('.login').addEventListener('click', function() {
            window.location.href = 'Loginpage.html';
            });

            function getproduct() {
             const url =  `https://shopping-card-ff680-default-rtdb.firebaseio.com/product.json`;
             fetch(url,{
                 method: 'GET'
             })
             .then((response) => response.json())
             .then((data) => {
                console.log('Data retrieved successfully:',Object.values(data));
                const apiResult =Object.values(data)

              const container = document.getElementById('accordion');

              apiResult.forEach((result, idx) => {
                console.log(result);


                // Create card element
                const card = document.createElement('div');
                card.classList = 'card-body';

                // Construct card content
                const content = `
                  <div class="card">
                
                  <div id="collapse-${idx}" class="collapse show" aria-labelledby="heading-${idx}" data-parent="#accordion">
                    <div class="card-body">
                      <img src="${`https://fastly.picsum.photos/id/2/5000/3333.jpg?hmac=_KDkqQVttXw_nM-RyJfLImIbafFrqLsuGO5YuHqD-qQ`}" alt="${result.name}" ;">
                      <h5>${result.name}</h5>
                      <p>${result.Description}</p>
                      <p>$${result.price}</p>
                      <button onclick="addToCart(${idx})">Add to Cart</button>
                      ...
                    </div>
                  </div>
                </div>
                `;

                // Append newyly created card element to the container
                container.innerHTML += content;
              })
                                    
              })
                .catch(error =>{
                console.error('Error retrieving data:',error);
                })
              }
            getproduct()
</script> 
</body>
</html> 